# PRA04-05: Implementing Vaadin + React Frontend for Bookings in RentingCarTest

## CIFO La Violeta - FullStack IFCD0021-1-25 MF04-05

- doc version: `v0`
- **Prerequisite**: PRA01-02-03 successfully completed (backend with ManyToMany + ElementCollection)

In this second practical exercise, you will complete the full-stack application by building a **modern reactive frontend** using **Vaadin 24 + Hilla (React + TypeScript)**.  

You will create a fully functional **Bookings** view that consumes the Java backend via type-safe Hilla endpoints.

The project already includes a working `Cars` view as reference.

<mark>You will implement the Bookings section (backend endpoint + frontend view) using Vaadin Hilla, React, TypeScript and Tailwind CSS.</mark>

## Objectives

> Expose a new `@Endpoint` for bookings (PRA04) .
> 
> Create a new responsive Bookings view in React + TypeScript (PRA05) .
> 
> Display real booking data with proper loading/error states .
> 
> Integrate the view into the application menu.

### Project Base

- Repository: [GitHub - AlbertProfe/rentingCar-vaadin commit d2285c](https://github.com/AlbertProfe/rentingCarTest/tree/d2285c4e03a6b47e7eb7e268405823b06298000c/rentingCar-vaadin)
- Commit to clone: [`d2285c4e03a6b47e7eb7e268405823b06298000c`](https://github.com/AlbertProfe/rentingCarTest/tree/d2285c4e03a6b47e7eb7e268405823b06298000c)
- Reference view: [`cars.tsx`](https://github.com/AlbertProfe/rentingCarTest/blob/master/rentingCar-vaadin/src/main/frontend/views/cars.tsx)
- Documentation:
  - [Vaadin](https://vaadin.com/docs/latest/) / [Hilla](https://hilla.dev/docs/)
  - [masterDoc_v5](https://github.com/AlbertProfe/rentingCarTest/blob/master/docs/rentingCarv5-masterDoc%20.md)

### Tasks

- [ ] Create `BookingEndpoint` with method `getAllBookings()` returning `List<Booking>` (PRA04)
- [ ] Create new file `src/main/frontend/views/bookings.tsx` (PRA05)
- [ ] Fetch bookings using `BookingEndpoint.getAllBookings()`
- [ ] Render a responsive card layout (or Vaadin Grid) showing car, customer, dates, status and price
- [ ] Add loading and error states
- [ ] Register the view in the menu with proper icon and order

### Example Skeleton: bookings.tsx (PRA05)

```jsx
import { ViewConfig } from '@vaadin/hilla-file-router/types.js';
import { useEffect, useState } from 'react';
import { BookingEndpoint } from 'Frontend/generated/endpoints';
import Booking from 'Frontend/generated/dev/app/rentingcartestvaadin/model/Booking';

export const config: ViewConfig = {
  menu: { order: 2, icon: 'line-awesome/svg/calendar-check-solid.svg' },
  title: 'Bookings'
};

export default function BookingsView() {
  const [bookings, setBookings] = useState<Booking[]>([]);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  useEffect(() => {
    const fetchBookings = async () => {
        // ...
        const data = await BookingEndpoint.getAllBookings();
       // ...
    fetchBookings();
  }, []);

  if (loading) return <div className="p-8 text-center">Loading bookings...</div>;
  if (error) return <div className="p-8 text-red-600 text-center">{error}</div>;

  return (
    <div className="p-6">

        {bookings.map((booking) => (
           // ...
        ))}
      </div>
  );
}
```

### Example Java Endpoint (PRA04)

```java
@Endpoint
@AnonymousAllowed
public class BookingEndpoint {

    private final BookingService bookingService;

    public BookingEndpoint(BookingService bookingService) {
        this.bookingService = bookingService;
    }

    public List<Booking> getAllBookings() {
        return bookingService.findAll();
    }
```

### Submission Guidelines

- <mark>Clone</mark> the repository at the specified commit `d2285c4e`
- <mark>Create</mark> a new branch named `PRA04-05` from the cloned commit
- <mark>Update</mark> the code to implement the tasks outlined above
- <mark>Commit</mark> your changes with clear, descriptive messages
- <mark>Push</mark> your branch to your personal GitHub repository
- Create a <mark>zip</mark> file of your project and a `.md` file **summarizing** your changes at root project:
  - Brief explanation of Hilla endpoints and type-safety
  - Differences observed vs traditional REST.
  - Add to `rootProject/docs/images` relevant screenshots (Bookings view running with data).
- <mark>Submit</mark> the zip file with `.md` file to the teacher via [IFCD0021-1-25 Deliveries](https://albertprofe.dev/ifcd0021-1-25/ifcd0021-deliveries-1-25.html)

### Evaluation Criteria

- Correct implementation and exposure of `BookingEndpoint` via Hilla
- Functional and complete `bookings.tsx` view with data loading
- Proper handling of loading, error and empty states
- Clean, responsive UI using Tailwind CSS and consistent with the Cars view
- Correct menu integration (icon, title, order)
- Use of TypeScript types generated by Hilla (no `any`)
- Code quality, organization and descriptive commits
- Screenshots and summary `.md` included in submission

Good luck with your implementation! You are now building a true modern full-stack Java application with type-safe React frontend in 2025.
